Deno のコアコントリビュータになる
======

本章では Deno のコントリビュータになるための方法を説明します. コントリビュートと言っても様々な形がありますが, この章では特に github.com/denoland/deno の deno 本体のソースコードにコントリビュートする方法を解説します.

# Deno をビルドする

## 前提条件

git の操作ができることは前提とします.

Mac, Windows 共通で以下のソフトウェアがインストールされている必要があります.

- rust 1.31.1 以上がインストールされていること
- python 2.7 がインストールされていること
- node.js がインストールされていること

上に加えて Mac の場合

- XCode がインストールされていること

Windows の場合

- VS Community 2017 with "Desktop development with C++" toolkit がインストールされていること

が必要になります.

## rust のインストール

rustup を使います.

## python のインストール

## node.js のインストール

## 先ずはビルドする

まずはリポジトリをクローンしましょう.

```
git clone https://github.com/denoland/deno.git
cd deno
```

Deno は git の submodule という仕組みを使っているので, submodule をアップデートしましょう
```
git submodule update --init
```

上のコマンドで `third_party` という Deno をビルドするためのサードパーティ依存全体を含んだレポジトリと `deno_std` という Deno の標準ライブラリが含まれたレポジトリがチェックアウトされます.

サブモジュールのインストールが終わったら, 次のコマンドでビルド用の準備ファイルを生成します (初回実行時のみネットワークアクセスが必要です).

```
./tools/setup.py
```

このコマンドで, 必要なバイナリ依存ファイルがダウンロードされたり, ビルド設定の ninja ファイルなどが `//target/` ディレクトリ以下に生成されます.

セットアップが完了したら, 次のコマンドで Deno をビルドしましょう.

```
./tools/build.py
```

上のコマンドは初回だと, 数分 ~ 数十分程度かかります. 2回目以降は, 修正箇所にもよりますが, かなり短縮されます(数秒 ~ 数十秒程度).

ビルドコマンドが成功すると `//target/debug/deno` というパスにビルドされた deno コマンドが生成されます. コマンドを叩いて動作を確認してみましょう.

```
$ ./target/debug/deno -h
deno: 0.3.7
v8: 7.4.238
typescript: 3.4.1
```

上のように出力されれば, ビルドが成功しています.

## テストを実行する

下のコマンドでテストが実行されます.

```
./tools/test.py
```

テストの実行にはネットワークアクセスが必要になります. (これは一部のテストがネットワークアクセスを必要としているためです.) テストの実行には数分程度の時間がかかります.

## コードフォーマットを実行する

下のコマンドでコードのフォーマット(整形)が実行されます.

```
./tools/format.py
```

上の1コマンドで GN, Python, C++, Rust, TypeScript, JavaScript 6言語のフォーマットが全て実行されます. (すごい!)

## リントを実行する

下のコマンドでリントが実行されます.

```
./tools/lint.py
```

上のコマンドで Python, C++, TypeScript, JavaScript のリントが実行されます. 上のコマンドには Rust のリントが含まれておらず, Rust のリントが自動化出来ていないことは残課題の1つです. Issue #

# 課題の探し方

ビルド, テスト, フォーマット, リントまでが出来るようになったら, Deno の開発をする準備が整ったと言えます.

ではここからは, どうやってコントリビュートする課題を見つけるかを考えてみましょう.

```
- マニュアルを読む (typo 探し)
- disable されたテストを探す
- TODO コメントを探す
- issue を漁る (着手不可能なものも多い)
- 機能を入れる. 足りない API を見つける
- 機能を入れる. node の定番モジュールで deno_std に入っていないものを見つける
- greenkeeping: package.json のアップデート
```

## マニュアルを読む (typo 探し)

一番簡単な方法はマニュアルを読むことです.

Deno の公式マニュアルは `https://deno.land/manual.html` にあります. かなり長いマニュアルですが, 中に必ず typo (誤字) が10箇所程度は含まれているはずです. typo を見つけたら, その修正をプルリクエストで投げましょう. `manual.html` のソースコードはレポジトリ内の `website/manual.md` です (このマークダウンが動的に html 化されています). 対応箇所をマークダウンファイルの中から見つけて修正し, プルリクエストを投げましょう.

なお, 他にも typo が含まれうるドキュメントでは以下があります.

- スタイルガイド: https://deno.land/style_guide.html
- ベンチマーク表: https://deno.land/benchmarks.html
- リリースノート: Releases.md

これらを舐めるように読めば, 数回はコントリビュートできるはずです.

## Issue を漁る

Issue を漁ることでコントリビュートする課題を見つけることが出来ます.

既知の未解決課題紹介

## API を提案する

Node.js の API にあって Deno にないものを見つけましょう.

また Web の API で Deno にあってもおかしくないものを見つけましょう.

## TODO コメントを漁る

最も着手がしやすい課題の探し方です.

## Deno で実用的なツールを作る

Deno で何か実用性のあるものを作ってみましょう. 課題がたくさん見つかるはずです. その課題を解決すればコントリビューションになります.
